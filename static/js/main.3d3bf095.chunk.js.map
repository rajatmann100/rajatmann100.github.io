{"version":3,"sources":["images/imageNA.jpeg","components/Card.jsx","App.js","serviceWorker.js","CovidApp.js","index.js"],"names":["module","exports","useStyles","makeStyles","theme","root","display","width","margin","cursor","details","flexDirection","content","flex","cover","minWidth","controls","alignItems","paddingLeft","spacing","paddingBottom","playIcon","height","MediaControlCard","props","classes","Card","className","onClick","e","window","open","item","url","CardMedia","image","images","length","url_170x135","imageNA","title","CardContent","Typography","component","variant","price","currency_code","color","App","state","data","page","loading","showMaskPage","this","maskPageLoad","setState","fetch","then","response","json","results","forEach","element","index","listing_id","scrollTo","x","document","getElementById","style","type","id","toggleSearch","class","fontWeight","textAlign","map","key","Button","Component","Boolean","location","hostname","match","mapboxgl","accessToken","tippyInstances","SUPPORTED_LANGS","LANG","ddb","prefectures","undefined","trend","totals","confirmed","recovered","deceased","tested","critical","totalsDiff","travelRestrictions","loadData","callback","delay","tryFetch","retryFn","res","catch","networkError","statesData","usDailyData","statesDailyData","stateCodes","daily","reverse","i","positiveIncrease","recoveredCumulative","deceasedCumulative","death","confirmedCumulative","positive","criticalCumulative","inIcuCumulative","testedCumulative","totalTestResults","date","d","toString","slice","formatDate","confirmedAvg3d","confirmedCumulativeAvg3d","confirmedAvg7d","confirmedCumulativeAvg7d","statesByDay","Object","keys","filter","maxLen","Math","max","pad","iter","push","s","deaths","dailyConfirmedCount","find","name_ja","name","code","updated","refineData","retryFetchWithDelay","err","console","log","setTimeout","NodeList","prototype","thisArg","call","trendChart","drawTrendChart","sheetTrend","cols","Date","Confirmed","Active","Critical","Deceased","Recovered","Tested","row","destroy","c3","bindto","newColor","d3","opacity","columns","regions","start","pattern","point","r","axis","tick","format","count","y","padding","bottom","values","tooltip","value","ratio","diff","parseInt","i18next","t","grid","show","right","dailyIncreaseChart","drawDailyIncreaseChart","bar","xDate","getMonth","getDate","legend","hide","prefectureTrajectoryChart","drawPrefectureTrajectoryChart","filteredPrefectures","_","prefecture","trajectories","reduce","cumulativeConfirmed","result","sum","cumulativeConfirmedFromMinimum","lastIndex","concat","mapValues","end","maxDays","a","b","nameMap","size","min","label","labels","v","names","originalColor","l","annotation","diffText","drawPrefectureTable","dataTable","querySelector","dataTableFoot","querySelectorAll","tbody","parentNode","removeChild","prefectureRows","createElement","insertBefore","portOfEntryRows","unspecifiedRows","pref","orderBy","increment","incrementString","innerHTML","appendChild","drawTravelRestrictions","travelRestrictionsHelper","japan","banned","visaRequired","selfQuarantine","other","elementId","countries","countryList","country","unshift","link","emoji","join","drawLastUpdated","lastUpdatedString","lastUpdated","parseISO","parse","textContent","relativeTime","en","formatDistanceToNow","local","enUS","addSuffix","ja","locale","setAttribute","addResource","drawPageTitleCount","localize","locI18next","init","setLang","lng","proposedLng","indexOf","el","currentLangPicker","toggleLangPicker","changeLanguage","styleLoaded","getStyle","layers","thisLayer","setLayoutProperty","body","classList","contains","Array","isArray","instance","node","i18nKey","getAttribute","dataTippyContent","tippy","updateTooltipLang","loadDataOnPage","jsonData","newTotals","pullLatestSumAndDiff","rowKey","totalKey","latest","dayBefore","twoDaysBefore","calculateTotals","setKpi","setKpiDiff","diffDir","drawKpis","func","param","performance","now","whenMapAndDataReady","pageDraws","firstSymbolId","prefecturePaint","cases","addSource","addLayer","source","layout","paint","setPaintProperty","drawMapPrefectures","onload","use","LanguageDetector","fallbackLng","lowerCaseLng","detection","order","resources","translation","translationEn","translationJa","language","pick","addEventListener","preventDefault","target","dataset","langPicker","Map","container","zoom","minZoom","maxZoom","center","lat","dragRotate","disable","touchZoomRotate","disableRotation","scrollZoom","addControl","NavigationControl","showCompass","showZoom","once","setInterval","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.3d3bf095.chunk.js","sourcesContent":["module.exports = \"data:image/jpeg;base64,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\"","import React from 'react';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport Chip from '@material-ui/core/Chip';\nimport imageNA from \"../images/imageNA.jpeg\"\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n    width: \"800px\",\n    margin: \"24px auto\",\n    cursor: \"pointer\",\n  },\n  details: {\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n  content: {\n    flex: \"1 0 auto\",\n  },\n  cover: {\n    minWidth: 200,\n  },\n  controls: {\n    display: \"flex\",\n    alignItems: \"center\",\n    paddingLeft: theme.spacing(1),\n    paddingBottom: theme.spacing(1),\n  },\n  playIcon: {\n    height: 38,\n    width: 38,\n  },\n}));\n\nexport default function MediaControlCard(props) {\n  const classes = useStyles();\n  return (\n    <Card className={classes.root} onClick={e=>{\n        window.open(props.item.url, \"_blank\");\n    }}>\n      <CardMedia\n        className={classes.cover}\n        image={\n          props.item.images && props.item.images.length\n            ? props.item.images[0].url_170x135\n            : imageNA\n        }\n        title=\"Live from space album cover\"\n      />\n      <div className={classes.details}>\n        <CardContent className={classes.content}>\n          <Typography component=\"h5\" variant=\"h5\">\n            {props.item.price + \" \" + props.item.currency_code}\n          </Typography>\n          {/* <div>\n              {props.item.tags.map(i=>{\n                  return <Chip\n                  label={i}\n                  clickable\n                  color=\"primary\"\n                  style={{marginRight:\"8px\"}}\n                //   onDelete={handleDelete}\n                //   deleteIcon={<DoneIcon />}\n                />\n              })}\n          </div> */}\n          {/* <Typography component=\"h5\" variant=\"h5\">\n            Live From Space\n          </Typography> */}\n          <Typography variant=\"subtitle1\" color=\"textSecondary\">\n            {props.item.title}\n          </Typography>\n        </CardContent>\n      </div>\n    </Card>\n  );\n}\n","import React, { Component } from \"react\";\n// import logo from \"./logo.svg\";\nimport \"./App.css\";\nimport ItemCard from \"./components/Card\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\n\nclass App extends Component {\n  state = {\n    data: [],\n    page: 1,\n    loading: false,\n    showMaskPage: false\n  };\n\n  componentDidMount() {\n    this.maskPageLoad();\n  }\n\n  maskPageLoad() {\n    this.setState({\n      loading: true\n    });\n    fetch(\n      `https://openapi.etsy.com/v2/listings/active?keywords=mask&limit=8&page=${this.state.page}&api_key=8ciaok2g6gvh07293yba4zqp`\n    )\n      .then((response) => response.json())\n      .then((data) => {\n        data.results.forEach((element, index) => {\n          fetch(\n            `https://openapi.etsy.com/v2/listings/${element.listing_id}/images?api_key=8ciaok2g6gvh07293yba4zqp`\n          )\n            .then((response) => response.json())\n            .then((images) => {\n              element.images = images.results;\n              if (index === 7) {\n                this.setState({\n                  data: data.results,\n                  page: this.state.page + 1,\n                  loading: false\n                });\n                window.scrollTo(0, 0);\n\n              }\n            });\n        });\n        // var y = document.getElementById(\"mask-page\");\n        // y.innerText = JSON.stringify(data.results[4], null, \"\\t\");\n      });\n  }\n\n  toggleSearch() {\n    var x = document.getElementById(\"covid-page\");\n    if (x.style.display === \"none\") {\n      x.style.display = \"block\";\n      this.setState({\n        showMaskPage: false\n      })\n    } else {\n      x.style.display = \"none\";\n      this.setState({\n        showMaskPage: true\n      })\n    }\n    window.scrollTo(0, 0);\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <div className=\"circular-button-search\">\n          <input type=\"text\" id=\"search-field\" />\n          {/* <button onClick={(e) => this.toggleSearch()}></button> */}\n          <a className=\"circular-button-search\">\n            <input type=\"text\" id=\"search-field\" />\n            <button onClick={(e) => this.toggleSearch()}></button>\n          </a>\n        </div>\n        {this.state.showMaskPage && (\n          <div class=\"mask-page\">\n            <Typography\n              component=\"h3\"\n              variant=\"h3\"\n              style={{\n                fontWeight: \"bold\",\n                textAlign: \"center\",\n                margin: \"64px\",\n              }}\n            >\n              Buy home made masks from Etsy\n            </Typography>\n            {this.state.page > 1 && (\n              <Typography\n                component=\"h5\"\n                variant=\"h5\"\n                style={{\n                  fontWeight: \"bold\",\n                  textAlign: \"center\",\n                  margin: \"64px\",\n                }}\n              >\n                PAGE {this.state.page - 1}\n              </Typography>\n            )}\n            {this.state.data.map((item, index) => {\n              return <ItemCard item={item} key={index} />;\n            })}\n            <Button\n              variant=\"outlined\"\n              color={this.state.loading ? \"secondary\" : \"primary\"}\n              onClick={(e) => this.maskPageLoad()}\n            >\n              {this.state.loading ? \"Loading...\" : \"Load More\"}\n            </Button>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import './CovidApp.scss'\n// Injects required polyfills for IE11\nimport \"core-js/stable\";\nimport \"whatwg-fetch\";\nimport \"classlist-polyfill\";\n\n// Add all non-polyfill deps below.\nimport _ from \"lodash\";\nimport tippy from \"tippy.js\";\nimport * as d3 from \"d3\";\nimport * as c3 from \"c3\";\nimport { formatDistanceToNow, parse, parseISO } from \"date-fns\";\nimport { enUS, ja } from \"date-fns/locale\";\n\n// Localization deps\nimport i18next from \"i18next\";\nimport LanguageDetector from \"i18next-browser-languagedetector\";\nimport locI18next from \"loc-i18next\";\nimport translationEn from \"./i18n/en.json\";\nimport translationJa from \"./i18n/ja.json\";\n\n// import static data\nimport travelRestrictions from \"./data/travelRestrictions\"; // refer to the keys under \"countries\" in the i18n files for names\n\nwindow.mapboxgl.accessToken =\n  \"pk.eyJ1IjoicmFqYXRtYW5uMTAwIiwiYSI6ImNrOHVpZmN1NjAwaXkzZnFtZGEzM3Y3b3IifQ.cIQ4_s5LLGrFyyKsruPQEg\";\nconst PREFECTURE_JSON_PATH = \"static/us_states.geojson\";\nconst COLOR_ACTIVE = \"rgb(223,14,31)\";\nconst COLOR_CONFIRMED = \"rgb(244,67,54)\";\nconst COLOR_RECOVERED = \"rgb(25,118,210)\";\nconst COLOR_DECEASED = \"rgb(55,71,79)\";\nconst COLOR_TESTED = \"rgb(164,173,192)\";\nconst COLOR_TESTED_DAILY = \"rgb(209,214,223)\";\n// const COLOR_INCREASE = \"rgb(163,172,191)\";\nconst PAGE_TITLE = \"Coronavirus Disease (COVID-19) Japan Tracker\";\n\nconst SUPPORTED_LANGS = [\"en\", \"ja\"];\nlet LANG = \"en\";\n\n// Global vars\nlet ddb = {\n  prefectures: undefined,\n  trend: undefined,\n  totals: {\n    confirmed: 0,\n    recovered: 0,\n    deceased: 0,\n    tested: 0,\n    critical: 0,\n  },\n  totalsDiff: {\n    confirmed: 0,\n    recovered: 0,\n    deceased: 0,\n    tested: 0,\n    critical: 0,\n  },\n  travelRestrictions,\n};\nlet map = undefined;\nlet tippyInstances;\n\n// IE11 forEach Polyfill\nif (\"NodeList\" in window && !NodeList.prototype.forEach) {\n  NodeList.prototype.forEach = function (callback, thisArg) {\n    thisArg = thisArg || window;\n    for (var i = 0; i < this.length; i++) {\n      callback.call(thisArg, this[i], i, this);\n    }\n  };\n}\n\n// Added for adapting to US data\nfunction refineData(statesData, usDailyData, statesDailyData, stateCodes) {\n  var daily = usDailyData.reverse().map((i, index) => {\n    const formatDate = (d) => {\n      let date = d.toString();\n      date = date.slice(0, 4) + \"-\" + date.slice(4, 6) + \"-\" + date.slice(6, 8);\n      return date;\n    };\n    return {\n      confirmed: i.positiveIncrease,\n      recoveredCumulative: i.recovered,\n      deceasedCumulative: i.death,\n      confirmedCumulative: i.positive,\n      criticalCumulative: i.inIcuCumulative,\n      testedCumulative: i.totalTestResults,\n      date: formatDate(i.date),\n      confirmedAvg3d: 0,\n      confirmedCumulativeAvg3d: 0,\n      confirmedAvg7d: 0,\n      confirmedCumulativeAvg7d: 0,\n    };\n  });\n  var statesByDay = Object.keys(stateCodes).map((state) => {\n    return {\n      state: state,\n      data: statesDailyData\n        .filter((i) => i.state === state)\n        .map((i) => (i.positiveIncrease ? i.positiveIncrease : 0)),\n    };\n  });\n  var maxLen = Math.max(...statesByDay.map((i) => i.data.length));\n  statesByDay = statesByDay.map((i) => {\n    var pad = i.data.length;\n    for (var iter = 0; iter < maxLen - pad; iter++) {\n      i.data.push(0);\n    }\n    return {\n      state: i.state,\n      data: i.data.reverse(),\n    };\n  });\n\n  var states = statesData.map((s) => {\n    return {\n      confirmed: s.positive,\n      deaths: s.death,\n      dailyConfirmedCount: statesByDay.find((i) => i.state === s.state).data,\n      recovered: s.recovered,\n      name_ja: stateCodes[s.state],\n      name: stateCodes[s.state],\n      code: s.state,\n    };\n  });\n  return {\n    prefectures: states,\n    daily: daily,\n    updated: \"2020-04-06T22:48:36+09:00\",\n  };\n}\n\n// Fetches data but applies an exponential\n// backoff if there is an error.\nfunction loadData(callback) {\n  let delay = 2 * 1000; // 2 seconds\n\n  const tryFetch = function (retryFn) {\n    // Load the json data file\n    fetch(\"https://covidtracking.com/api/v1/states/current.json\")\n      .then(function (res) {\n        return res.json();\n      })\n      .catch(function (networkError) {\n        retryFn(delay, networkError);\n        delay *= 2; // exponential backoff.\n      })\n      .then(function (statesData) {\n        // If there was a network error, data will null.\n        if (statesData) {\n          fetch(\"https://covidtracking.com/api/us/daily\")\n            .then(function (res) {\n              return res.json();\n            })\n            .catch(function (networkError) {\n              retryFn(delay, networkError);\n              delay *= 2; // exponential backoff.\n            })\n            .then(function (usDailyData) {\n              if (usDailyData) {\n                fetch(\"https://covidtracking.com/api/v1/states/daily.json\")\n                  .then(function (res) {\n                    return res.json();\n                  })\n                  .catch(function (networkError) {\n                    retryFn(delay, networkError);\n                    delay *= 2; // exponential backoff.\n                  })\n                  .then(function (statesDailyData) {\n                    if (statesDailyData) {\n                      fetch(\"static/us_state_codes.json\")\n                        .then(function (res) {\n                          return res.json();\n                        })\n                        .then(function (stateCodes) {\n                          callback(\n                            refineData(\n                              statesData,\n                              usDailyData,\n                              statesDailyData,\n                              stateCodes\n                            )\n                          );\n                        });\n                    }\n                  });\n              }\n            });\n        }\n      });\n  };\n\n  const retryFetchWithDelay = function (delay, err) {\n    console.log(err + \": retrying after \" + delay + \"ms.\");\n    setTimeout(function () {\n      tryFetch(retryFetchWithDelay);\n    }, delay);\n  };\n\n  tryFetch(retryFetchWithDelay);\n}\n\nfunction calculateTotals(daily) {\n  // Calculate the totals\n  let totals = {\n    confirmed: 0,\n    recovered: 0,\n    deceased: 0,\n    critical: 0,\n    tested: 0,\n  };\n  let totalsDiff = {\n    confirmed: 1,\n    recovered: 1,\n    deceased: 1,\n    critical: 1,\n    tested: 1,\n  };\n\n  // If there is an empty cell, fall back to the previous row\n  function pullLatestSumAndDiff(rowKey, totalKey) {\n    let latest = {};\n    let dayBefore = {};\n    let twoDaysBefore = {};\n    if (daily.length > 2) {\n      twoDaysBefore = daily[daily.length - 3];\n    }\n    if (daily.length > 1) {\n      dayBefore = daily[daily.length - 2];\n    }\n    if (daily.length > 0) {\n      latest = daily[daily.length - 1];\n    }\n\n    if (latest && dayBefore && latest[rowKey] && dayBefore[rowKey]) {\n      totals[totalKey] = latest[rowKey];\n      totalsDiff[totalKey] = latest[rowKey] - dayBefore[rowKey];\n    }\n\n    if (totalsDiff[totalKey] <= 0 && twoDaysBefore && twoDaysBefore[rowKey]) {\n      totalsDiff[totalKey] = latest[rowKey] - twoDaysBefore[rowKey];\n    }\n  }\n\n  pullLatestSumAndDiff(\"testedCumulative\", \"tested\");\n  pullLatestSumAndDiff(\"criticalCumulative\", \"critical\");\n  pullLatestSumAndDiff(\"confirmedCumulative\", \"confirmed\");\n  pullLatestSumAndDiff(\"recoveredCumulative\", \"recovered\");\n  pullLatestSumAndDiff(\"deceasedCumulative\", \"deceased\");\n\n  return [totals, totalsDiff];\n}\n\nfunction drawMap() {\n  // Initialize Map\n\n  map = new window.mapboxgl.Map({\n    container: \"map-container\",\n    style: \"mapbox://styles/mapbox/light-v10\",\n    zoom: 3,\n    minZoom: 1,\n    maxZoom: 3,\n    center: {\n      lng: -98.5795,\n      lat: 39.8283,\n    },\n  });\n\n  map.dragRotate.disable();\n  map.touchZoomRotate.disableRotation();\n  map.scrollZoom.disable();\n  map.addControl(\n    new window.mapboxgl.NavigationControl({\n      showCompass: false,\n      showZoom: true,\n    })\n  );\n}\n\n// Keep a reference around to destroy it if we redraw this.\nlet trendChart = null;\n\nfunction drawTrendChart(sheetTrend) {\n  var cols = {\n    Date: [\"Date\"],\n    Confirmed: [\"Confirmed\"],\n    Active: [\"Active\"],\n    Critical: [\"Critical\"],\n    Deceased: [\"Deceased\"],\n    Recovered: [\"Recovered\"],\n    Tested: [\"Tested\"],\n  };\n\n  for (var i = 0; i < sheetTrend.length; i++) {\n    var row = sheetTrend[i];\n\n    if (i === 0) {\n      // Skip early feb data point\n      continue;\n    }\n\n    cols.Date.push(row.date);\n    cols.Confirmed.push(row.confirmedCumulative);\n    cols.Critical.push(row.criticalCumulative);\n    cols.Deceased.push(row.deceasedCumulative);\n    cols.Recovered.push(row.recoveredCumulative);\n    cols.Active.push(\n      row.confirmedCumulative - row.deceasedCumulative - row.recoveredCumulative\n    );\n    cols.Tested.push(row.testedCumulative);\n  }\n\n  if (trendChart) {\n    trendChart.destroy();\n  }\n  trendChart = c3.generate({\n    bindto: \"#trend-chart\",\n    data: {\n      x: \"Date\",\n      color: function (color, d) {\n        if (d && d.index === cols.Date.length - 2) {\n          let newColor = d3.color(color);\n\n          newColor.opacity = 0.6;\n          return newColor;\n        } else {\n          return color;\n        }\n      },\n      columns: [\n        cols.Date,\n        cols.Confirmed,\n        cols.Active,\n        cols.Recovered,\n        cols.Deceased,\n        //cols.Tested\n      ],\n      regions: {\n        [cols.Confirmed[0]]: [\n          { start: cols.Date[cols.Date.length - 2], style: \"dashed\" },\n        ],\n        [cols.Active[0]]: [\n          { start: cols.Date[cols.Date.length - 2], style: \"dashed\" },\n        ],\n        [cols.Recovered[0]]: [\n          { start: cols.Date[cols.Date.length - 2], style: \"dashed\" },\n        ],\n        [cols.Deceased[0]]: [\n          { start: cols.Date[cols.Date.length - 2], style: \"dashed\" },\n        ],\n        //[cols.Tested[0]]: [{'start': cols.Date[cols.Date.length-2], 'style':'dashed'}],\n      },\n    },\n    color: {\n      pattern: [COLOR_CONFIRMED, COLOR_ACTIVE, COLOR_RECOVERED, COLOR_DECEASED],\n    },\n    point: {\n      r: 3,\n    },\n    axis: {\n      x: {\n        type: \"timeseries\",\n        tick: {\n          format: \"%b %d\",\n          count: 6,\n        },\n      },\n      y: {\n        padding: {\n          bottom: 0,\n        },\n        tick: {\n          values: [\n            0,\n            100000,\n            200000,\n            300000,\n            400000,\n            500000,\n            600000,\n            700000,\n            800000,\n            900000,\n            1000000,\n            1100000,\n          ],\n        },\n      },\n    },\n    tooltip: {\n      format: {\n        value: function (value, ratio, id, index) {\n          if (index && cols[id][index]) {\n            var diff = parseInt(value) - cols[id][index];\n            return `${value} (${(diff >= 0 ? \"+\" : \"\") + diff}) ${\n              index === cols.Date.length - 2 ? i18next.t(\"provisional\") : \"\"\n              }`;\n          } else {\n            return value;\n          }\n        },\n      },\n    },\n    grid: {\n      x: {\n        show: true,\n      },\n      y: {\n        show: true,\n      },\n    },\n    padding: {\n      right: 24,\n    },\n  });\n}\n\n// Keep reference to current chart in order to clean up when redrawing.\nlet dailyIncreaseChart = null;\n\nfunction drawDailyIncreaseChart(sheetTrend) {\n  var cols = {\n    Date: [\"Date\"],\n    Confirmed: [\"New Cases\"],\n  };\n\n  for (var i = 0; i < sheetTrend.length; i++) {\n    var row = sheetTrend[i];\n\n    if (i === 0) {\n      // Skip early feb data point\n      continue;\n    }\n\n    cols.Date.push(row.date);\n    cols.Confirmed.push(row.confirmed);\n  }\n\n  if (dailyIncreaseChart) {\n    dailyIncreaseChart.destroy();\n  }\n\n  dailyIncreaseChart = c3.generate({\n    bindto: \"#daily-increase-chart\",\n    data: {\n      color: function (color, d) {\n        if (d && d.index === cols.Date.length - 2) {\n          return COLOR_TESTED_DAILY;\n        } else {\n          return COLOR_TESTED;\n        }\n      },\n      columns: [cols.Confirmed],\n      type: \"bar\",\n      regions: {\n        [cols.Confirmed[0]]: [\n          { start: cols.Date[cols.Date.length - 2], style: \"dashed\" },\n        ],\n      },\n    },\n    bar: {\n      width: {\n        ratio: 0.8,\n      },\n    },\n    axis: {\n      x: {\n        tick: {\n          format: function (x) {\n            var months = [\n              \"Jan\",\n              \"Feb\",\n              \"Mar\",\n              \"Apr\",\n              \"May\",\n              \"Jun\",\n              \"Jul\",\n              \"Aug\",\n              \"Sep\",\n              \"Oct\",\n              \"Nov\",\n              \"Dec\",\n            ];\n\n            // x+1 because the list is prefixed with the label\n            var xDate = new Date(cols.Date[x + 1]);\n            return months[xDate.getMonth()] + \" \" + xDate.getDate();\n          },\n        },\n      },\n      y: {\n        tick: {\n          values: [\n            0,\n            4000,\n            8000,\n            12000,\n            16000,\n            20000,\n            24000,\n            28000,\n            32000,\n            36000,\n          ],\n        },\n      },\n    },\n    tooltip: {\n      format: {\n        value: function (value, ratio, id, index) {\n          return `${value} ${\n            index === cols.Date.length - 2 ? i18next.t(\"provisional\") : \"\"\n            }`;\n        },\n      },\n    },\n    grid: {\n      x: {\n        show: true,\n      },\n      y: {\n        show: true,\n      },\n    },\n    legend: {\n      hide: true,\n    },\n    padding: {\n      right: 24,\n    },\n  });\n}\n\n// Keep reference to chart in order to destroy it when redrawing.\nlet prefectureTrajectoryChart = null;\n\nfunction drawPrefectureTrajectoryChart(prefectures) {\n  const minimumConfirmed = 100000;\n  const filteredPrefectures = _.filter(prefectures, function (prefecture) {\n    return prefecture.confirmed >= minimumConfirmed;\n  });\n  const trajectories = _.reduce(\n    filteredPrefectures,\n    function (t, prefecture) {\n      const cumulativeConfirmed = _.reduce(\n        prefecture.dailyConfirmedCount,\n        function (result, value) {\n          if (result.length > 0) {\n            const sum = result[result.length - 1] + value;\n            result.push(sum);\n            return result;\n          } else {\n            return [value];\n          }\n        },\n        []\n      );\n      const cumulativeConfirmedFromMinimum = _.filter(\n        cumulativeConfirmed,\n        function (value) {\n          return value >= minimumConfirmed;\n        }\n      );\n      t[prefecture.name] = {\n        name: prefecture.name,\n        name_ja: prefecture.name_ja,\n        confirmed: prefecture.confirmed,\n        cumulativeConfirmed: cumulativeConfirmedFromMinimum,\n        lastIndex: cumulativeConfirmedFromMinimum.length - 1,\n      };\n      return t;\n    },\n    {}\n  );\n\n  const columns = _.map(Object.values(trajectories), function (prefecture) {\n    return [prefecture.name].concat(prefecture.cumulativeConfirmed);\n  });\n\n  const regions = _.mapValues(trajectories, function (prefecture) {\n    const value = prefecture.lastIndex;\n    if (value > 0) {\n      return [{ start: value - 1, end: value, style: \"dashed\" }];\n    } else {\n      return [];\n    }\n  });\n\n  const maxDays = _.reduce(\n    _.values(trajectories),\n    function (a, b) {\n      return Math.max(a, b.lastIndex);\n    },\n    0\n  );\n\n  const nameMap = _.reduce(\n    trajectories,\n    function (result, value) {\n      if (LANG === \"en\") {\n        result[value.name] = value.name;\n      } else {\n        result[value.name] = value.name_ja;\n      }\n      return result;\n    },\n    {}\n  );\n\n  if (prefectureTrajectoryChart) {\n    prefectureTrajectoryChart.destroy();\n  }\n\n  prefectureTrajectoryChart = c3.generate({\n    bindto: \"#prefecture-trajectory\",\n    size: {\n      height: 620,\n    },\n    color: {\n      pattern: d3.schemeTableau10,\n    },\n    axis: {\n      y: {\n        min: minimumConfirmed,\n        padding: {\n          bottom: 0,\n        },\n      },\n      x: {\n        // Set max x value to be 2 greater to avoid label cutoff\n        max: maxDays + 2,\n        label: `Number of Days since ${minimumConfirmed}th case`,\n      },\n    },\n    data: {\n      columns: columns,\n      labels: {\n        format: function (v, id, i) {\n          if (id) {\n            const lastIndex = trajectories[id].lastIndex;\n            if (lastIndex === 0 || i === lastIndex - 1) {\n              return id;\n            }\n          }\n        },\n      },\n      names: nameMap,\n      color: function (originalColor, d) {\n        let color = d3.hsl(originalColor);\n        if (!d || !d.id) {\n          return color;\n        }\n        const lastIndex = trajectories[d.id].lastIndex;\n        // Grey out when less than 1 week over minimumConfirmed\n        if (lastIndex < 7) {\n          color.l = 0.8;\n          color.s = 0.1;\n        }\n\n        if (d.index === lastIndex) {\n          color.opacity = 0.4;\n        } else {\n          color.opacity = 1;\n        }\n        return color;\n      },\n      regions: regions,\n    },\n    grid: {\n      x: {\n        show: true,\n      },\n      y: {\n        show: true,\n      },\n    },\n    padding: {\n      right: 24,\n    },\n    tooltip: {\n      format: {\n        value: function (value, ratio, id, index) {\n          const prefecture = trajectories[id];\n          if (index && prefecture.cumulativeConfirmed[index - 1]) {\n            const diff =\n              parseInt(value) - prefecture.cumulativeConfirmed[index - 1];\n            const annotation =\n              index === prefecture.lastIndex ? i18next.t(\"provisional\") : \"\";\n            const diffText = diff >= 0 ? `+${diff}` : diff;\n            return `${value} (${diffText}) ${annotation}`;\n          } else {\n            return value;\n          }\n        },\n      },\n    },\n  });\n}\n\n// Dictionary of all the trend charts so that we can cleanup when redrawing.\nlet prefectureTrendCharts = {};\n\nfunction drawPrefectureTrend(elementId, seriesData, maxConfirmedIncrease) {\n  let yMax = maxConfirmedIncrease;\n  let prefectureMax = _.max(seriesData);\n  if (prefectureMax / maxConfirmedIncrease < 0.1) {\n    yMax = prefectureMax * 5; // artificially scale up low values to make it look ok.\n  }\n\n  const period = 30; // days\n  let last30days = _.takeRight(seriesData, period);\n\n  if (prefectureTrendCharts[elementId]) {\n    prefectureTrendCharts[elementId].destroy();\n  }\n  prefectureTrendCharts[elementId] = c3.generate({\n    bindto: elementId,\n    interaction: { enabled: false },\n    data: {\n      type: \"bar\",\n      columns: [_.concat([\"confirmed\"], last30days)],\n      colors: { confirmed: COLOR_CONFIRMED },\n    },\n    bar: {\n      width: { ratio: 0.65 },\n      zerobased: true,\n    },\n    axis: {\n      x: {\n        show: false,\n        min: 0,\n        padding: 5,\n      },\n      y: {\n        show: false,\n        min: 0,\n        max: yMax,\n        padding: 1,\n      },\n    },\n    size: {\n      height: 40,\n    },\n\n    legend: { show: false },\n    tooltip: { show: false },\n    point: { show: false },\n  });\n}\n\nfunction drawPrefectureTable(prefectures, totals) {\n  // Draw the Cases By Prefecture table\n  let dataTable = document.querySelector(\"#prefectures-table\");\n  let dataTableFoot = document.querySelector(\"#prefectures-table tfoot\");\n\n  // Abort if dataTable or dataTableFoot is not accessible.\n  if (!dataTable || !dataTableFoot) {\n    return;\n  }\n\n  // Remove any tbody elements (including the loading indicator).\n  for (let tbody of document.querySelectorAll(\"#prefectures-table tbody\")) {\n    tbody.parentNode.removeChild(tbody);\n  }\n\n  let prefectureRows = document.createElement(\"tbody\");\n  prefectureRows.id = \"prefecture-rows\";\n  dataTable.insertBefore(prefectureRows, dataTableFoot);\n\n  let portOfEntryRows = document.createElement(\"tbody\");\n  portOfEntryRows.id = \"portofentry-rows\";\n  dataTable.insertBefore(portOfEntryRows, dataTableFoot);\n\n  let unspecifiedRows = document.createElement(\"tbody\");\n  unspecifiedRows.id = \"unspecified-rows\";\n  dataTable.insertBefore(unspecifiedRows, dataTableFoot);\n\n  // Work out the largest daily increase\n  let maxConfirmedIncrease = _.max(\n    _.map(prefectures, (pref) => {\n      return _.max(pref.dailyConfirmedCount);\n    })\n  );\n\n  // Parse values so we can sort\n  _.map(prefectures, function (pref) {\n    pref.confirmed = pref.confirmed ? parseInt(pref.confirmed) : 0;\n    pref.recovered = pref.recovered ? parseInt(pref.recovered) : 0;\n    // TODO change to deceased\n    pref.deceased = pref.deaths ? parseInt(pref.deaths) : 0;\n  });\n\n  // Iterate through and render table rows\n\n  _.orderBy(prefectures, \"confirmed\", \"desc\").map(function (pref) {\n    if (!pref.confirmed && !pref.recovered && !pref.deceased) {\n      return;\n    }\n\n    let increment =\n      pref.dailyConfirmedCount[pref.dailyConfirmedCount.length - 1];\n    let incrementString = \"\";\n    if (increment > 0) {\n      incrementString = `<span class='increment'>(+${increment})</span>`;\n    }\n\n    if (pref.name == \"Unspecified\") {\n      unspecifiedRows.innerHTML = `<tr>\n        <td class=\"prefecture\" data-i18n=\"unspecified\">${i18next.t(\n        \"unspecified\"\n      )}</td>\n        <td class=\"trend\"><div id=\"Unspecified-trend\"></div></td>\n        <td class=\"count\">${pref.confirmed} ${incrementString}</td>\n        <td class=\"count\">${pref.recovered ? pref.recovered : \"\"}</td>\n        <td class=\"count\">${pref.deceased ? pref.deceased : \"\"}</td>\n        </tr>`;\n      // drawPrefectureTrend(\n      //   `#Unspecified-trend`,\n      //   pref.dailyConfirmedCount,\n      //   maxConfirmedIncrease\n      // );\n    } else if (pref.name == \"Port Quarantine\" || pref.name == \"Port of Entry\") {\n      // Override Port Quartantine name as \"Port of Entry\". The name in the spreadsheet is\n      //  confusing.\n      //\n      // TODO(liquidx): move this hack into covid19japan-data.\n      portOfEntryRows.innerHTML = `<tr>\n        <td class=\"prefecture\" data-i18n=\"port-of-entry\">${i18next.t(\n        \"port-of-entry\"\n      )}</td>\n        <td class=\"trend\"><div id=\"PortOfEntry-trend\"></div></td>\n        <td class=\"count\">${pref.confirmed} ${incrementString}</td>\n        <td class=\"count\">${pref.recovered ? pref.recovered : \"\"}</td>\n        <td class=\"count\">${pref.deceased ? pref.deceased : \"\"}</td>\n        </tr>`;\n      // drawPrefectureTrend(\n      //   `#PortOfEntry-trend`,\n      //   pref.dailyConfirmedCount,\n      //   maxConfirmedIncrease\n      // );\n    } else if (pref.name == \"Total\") {\n      // Skip\n    } else {\n      let row = document.createElement(\"tr\");\n      prefectureRows.appendChild(row);\n      row.innerHTML = `\n        <td class=\"prefecture\" >\n        ${pref.name}</td>\n        <td id=\"${pref.code}-trend\" class=\"trend\"></div></td>\n        <td class=\"count\">${pref.confirmed} ${incrementString}</td>\n        <td class=\"count\">${pref.recovered ? pref.recovered : \"\"}</td>\n        <td class=\"count\">${pref.deceased ? pref.deceased : \"\"}</td>\n      `;\n      // drawPrefectureTrend(\n      //   `#${pref.code}-trend`,\n      //   pref.dailyConfirmedCount,\n      //   maxConfirmedIncrease\n      // );\n    }\n    return true;\n  });\n\n  dataTableFoot.innerHTML = `<tr class='totals'>\n        <td data-i18n=\"total\">${i18next.t(\"total\")}</td>\n        <td class=\"trend\"></td>\n        <td class=\"count\">${totals.confirmed}</td>\n        <td class=\"count\">${totals.recovered}</td>\n        <td class=\"count\">${totals.deceased}</td>\n        </tr>`;\n}\n\nfunction drawTravelRestrictions() {\n  travelRestrictionsHelper(\n    \"#banned-entry\",\n    ddb.travelRestrictions.japan.banned\n  );\n  travelRestrictionsHelper(\n    \"#visa-required\",\n    ddb.travelRestrictions.japan.visaRequired\n  );\n  travelRestrictionsHelper(\n    \"#self-quarantine\",\n    ddb.travelRestrictions.japan.selfQuarantine\n  );\n  travelRestrictionsHelper(\n    \"#other-restrictions\",\n    ddb.travelRestrictions.japan.other\n  );\n\n  /*travelRestrictionsHelper('#foreign-banned-entry', ddb.travelRestrictions.foreignBorders.banned);\n  travelRestrictionsHelper('#foreign-visa-required', ddb.travelRestrictions.foreignBorders.visaRequired);\n  travelRestrictionsHelper('#foreign-self-quarantine', ddb.travelRestrictions.foreignBorders.selfQuarantine);\n  travelRestrictionsHelper('#foreign-other-restrictions', ddb.travelRestrictions.foreignBorders.other);\n  */\n}\n\nfunction travelRestrictionsHelper(elementId, countries) {\n  let countryList = [];\n  // Iterate through and render country links\n  _.orderBy(countries, \"name\", \"desc\").map(function (country) {\n    let name = i18next.t(`countries.${country.name}`);\n    countryList.unshift(\n      `<a href=\"${country.link}\">${country.emoji}${name}</a>`\n    );\n    return true;\n  });\n\n  let banned = document.querySelector(elementId);\n  if (banned) {\n    banned.innerHTML = countryList.join(\", \");\n  }\n}\n\nfunction drawKpis(totals, totalsDiff) {\n  // Draw the KPI values\n\n  function setKpi(key, value) {\n    document.querySelector(\"#kpi-\" + key + \" .value\").innerHTML = value;\n  }\n  function setKpiDiff(key, value) {\n    let diffDir = value >= 0 ? \"+\" : \"\";\n    document.querySelector(\"#kpi-\" + key + \" .diff\").innerHTML =\n      \"( \" + diffDir + value + \" )\";\n  }\n\n  setKpi(\"confirmed\", totals.confirmed);\n  setKpiDiff(\"confirmed\", totalsDiff.confirmed);\n  setKpi(\"recovered\", totals.recovered);\n  setKpiDiff(\"recovered\", totalsDiff.recovered);\n  setKpi(\"deceased\", totals.deceased);\n  setKpiDiff(\"deceased\", totalsDiff.deceased);\n  setKpi(\"critical\", totals.critical);\n  setKpiDiff(\"critical\", totalsDiff.critical);\n  setKpi(\"tested\", totals.tested);\n  setKpiDiff(\"tested\", totalsDiff.tested);\n  setKpi(\"active\", totals.confirmed - totals.recovered - totals.deceased);\n  setKpiDiff(\n    \"active\",\n    totalsDiff.confirmed - totalsDiff.recovered - totalsDiff.deceased\n  );\n}\n\n/**\n * @param {string} lastUpdatedString - MMM DD YYYY, HH:mm JST (e.g. Mar 29 2020, 15:53 JST)\n */\nfunction drawLastUpdated(lastUpdatedString) {\n  // Draw the last updated time\n\n  const display = document.getElementById(\"last-updated\");\n  if (!display) {\n    return;\n  }\n\n  // If this is called before data is loaded, lastUpdated can be null.\n  if (!lastUpdatedString) {\n    return;\n  }\n\n  let lastUpdated;\n  try {\n    lastUpdated = parseISO(lastUpdatedString);\n\n    // If the timestamp is not ISO, fall back on the old date format\n    // TODO: remove after ISO time format is fully deployed\n    if (lastUpdated == \"Invalid Date\") {\n      lastUpdated = parse(\n        lastUpdatedString.slice(0, -4),\n        \"MMMM d yyyy, HH:mm\",\n        new Date()\n      );\n    }\n  } catch (e) {\n    // Fall back to raw value on failed parse\n    display.textContent = lastUpdatedString;\n    return;\n  }\n  const relativeTime = {\n    en: formatDistanceToNow(lastUpdated, {\n      local: enUS,\n      addSuffix: true,\n    }),\n    ja: formatDistanceToNow(lastUpdated, { locale: ja, addSuffix: true }),\n  };\n\n  display.textContent = relativeTime[LANG];\n  display.setAttribute(\"title\", lastUpdatedString);\n  i18next.addResource(\n    \"en\",\n    \"translation\",\n    \"last-updated-time\",\n    relativeTime[\"en\"]\n  );\n  i18next.addResource(\n    \"ja\",\n    \"translation\",\n    \"last-updated-time\",\n    relativeTime[\"ja\"]\n  );\n  display.setAttribute(\"data-i18n\", \"last-updated-time\");\n}\n\nfunction drawPageTitleCount(confirmed) {\n  // Update the number of confirmed cases in the title\n\n  document.title = \"(\" + confirmed + \") \" + PAGE_TITLE;\n}\n\n/**\n * drawMapPrefectures\n * @param {*} pageDraws - number of redraws to screen\n */\nfunction drawMapPrefectures(pageDraws) {\n  // Find the index of the first symbol layer\n  // in the map style so we can draw the\n  // prefecture colors behind it\n\n  var firstSymbolId;\n  var layers = map.getStyle().layers;\n  for (var i = 0; i < layers.length; i++) {\n    if (layers[i].type === \"symbol\") {\n      firstSymbolId = layers[i].id;\n      break;\n    }\n  }\n\n  // Start the Mapbox search expression\n  let prefecturePaint = [\"match\", [\"get\", \"NAME\"]];\n\n  // Go through all prefectures looking for cases\n  ddb.prefectures.map(function (prefecture) {\n    let cases = parseInt(prefecture.confirmed);\n    if (cases > 0) {\n      prefecturePaint.push(prefecture.name);\n\n      if (cases <= 10000) {\n        // 1-10000 cases\n        prefecturePaint.push(\"rgb(253,234,203)\");\n      } else if (cases <= 100000) {\n        // 10001-100000 cases\n        prefecturePaint.push(\"rgb(251,155,127)\");\n      } else if (cases <= 250000) {\n        // 100001-250000 cases\n        prefecturePaint.push(\"rgb(244,67,54)\");\n      } else {\n        // 250000+ cases\n        prefecturePaint.push(\"rgb(186,0,13)\");\n      }\n    }\n  });\n\n  // Add a final value to the list for the default color\n  prefecturePaint.push(\"rgba(0,0,0,0)\");\n\n  if (pageDraws === 0) {\n    // If it is the first time drawing the map\n\n    map.addSource(\"prefectures\", {\n      type: \"geojson\",\n      data: PREFECTURE_JSON_PATH,\n    });\n\n    // Add the prefecture color layer to the map\n    map.addLayer(\n      {\n        id: \"prefecture-layer\",\n        type: \"fill\",\n        source: \"prefectures\",\n        layout: {},\n        paint: {\n          \"fill-color\": prefecturePaint,\n          \"fill-opacity\": 0.8,\n        },\n      },\n      firstSymbolId\n    );\n\n    // Add another layer with type \"line\"\n    // to provide a styled prefecture border\n    let prefBorderLayer = map.addLayer(\n      {\n        id: \"prefecture-outline-layer\",\n        type: \"line\",\n        source: \"prefectures\",\n        layout: {},\n        paint: {\n          \"line-width\": 0.5,\n          \"line-color\": \"#c0c0c0\",\n          \"line-opacity\": 0.5,\n        },\n      },\n      firstSymbolId\n    );\n  } else {\n    // Update prefecture paint properties\n\n    map.setPaintProperty(\"prefecture-layer\", \"fill-color\", prefecturePaint);\n  }\n}\n\n// localize must be accessible globally\nconst localize = locI18next.init(i18next);\nfunction initDataTranslate() {\n  // load translation framework\n  i18next\n    .use(LanguageDetector)\n    .init({\n      fallbackLng: \"en\",\n      lowerCaseLng: true,\n      detection: {\n        order: [\"querystring\", \"navigator\"],\n      },\n      resources: {\n        en: {\n          translation: translationEn,\n        },\n        ja: {\n          translation: translationJa,\n        },\n      },\n    })\n    .then(() => {\n      setLang(i18next.language);\n    });\n\n  // Language selector event handler\n  if (document.querySelectorAll(\"[data-lang-picker]\")) {\n    document.querySelectorAll(\"[data-lang-picker]\").forEach(function (pick) {\n      pick.addEventListener(\"click\", function (e) {\n        e.preventDefault();\n        setLang(e.target.dataset.langPicker);\n      });\n    });\n  }\n}\n\nfunction setLang(lng) {\n  if (lng && lng.length > 1) {\n    // Clip to first two letters of the language.\n    let proposedLng = lng.slice(0, 2);\n    // Don't set the lang if it's not the supported languages.\n    if (SUPPORTED_LANGS.indexOf(proposedLng) != -1) {\n      LANG = proposedLng;\n    }\n  }\n\n  toggleLangPicker();\n\n  // set i18n framework lang\n  i18next.changeLanguage(LANG).then(() => {\n    localize(\"html\");\n    // Update the map\n    if (styleLoaded) {\n      map.getStyle().layers.forEach(function (thisLayer) {\n        if (thisLayer.type == \"symbol\") {\n          map.setLayoutProperty(thisLayer.id, \"text-field\", [\n            \"get\",\n            \"name_\" + LANG,\n          ]);\n        }\n      });\n    }\n\n    // Redraw all components that need rerendering to be localized the prefectures table\n    if (!document.body.classList.contains(\"embed-mode\")) {\n      if (document.getElementById(\"travel-restrictions\")) {\n        drawTravelRestrictions();\n      }\n      drawPrefectureTrajectoryChart(ddb.prefectures);\n    }\n\n    updateTooltipLang();\n  });\n}\n\nfunction updateTooltipLang() {\n  // Destroy current tooltips\n  if (Array.isArray(tippyInstances)) {\n    tippyInstances.forEach((instance) => instance.destroy());\n  }\n\n  // Set tooltip content to current language\n  document.querySelectorAll(`[data-tippy-i18n]`).forEach((node) => {\n    const i18nKey = node.getAttribute(\"data-tippy-i18n\");\n    const dataTippyContent = i18next.t(i18nKey);\n    node.setAttribute(\"data-tippy-content\", dataTippyContent);\n  });\n\n  // Activate tooltips\n  tippyInstances = tippy(\"[data-tippy-content]\");\n}\n\nfunction toggleLangPicker() {\n  // Toggle the lang picker\n  if (document.querySelectorAll(\"a[data-lang-picker]\")) {\n    document.querySelectorAll(\"a[data-lang-picker]\").forEach(function (el) {\n      el.style.display = \"inline\";\n    });\n\n    let currentLangPicker = document.querySelector(\n      \"a[data-lang-picker=\" + LANG + \"]\"\n    );\n    if (currentLangPicker) {\n      currentLangPicker.style.display = \"none\";\n    }\n  }\n}\n\nfunction loadDataOnPage() {\n  loadData(function (data) {\n    jsonData = data;\n\n    ddb.prefectures = jsonData.prefectures;\n    let newTotals = calculateTotals(jsonData.daily);\n    ddb.totals = newTotals[0];\n    ddb.totalsDiff = newTotals[1];\n    ddb.trend = jsonData.daily;\n    ddb.lastUpdated = jsonData.updated;\n\n\n    drawKpis(ddb.totals, ddb.totalsDiff);\n\n    if (!document.body.classList.contains(\"embed-mode\")) {\n      var callingArray = [\n        { func: drawLastUpdated, param: [ddb.lastUpdated] },\n        { func: drawPageTitleCount, param: [ddb.totals.confirmed] },\n        { func: drawTravelRestrictions, param: [null] },\n        { func: drawTrendChart, param: [ddb.trend] },\n        { func: drawDailyIncreaseChart, param: [ddb.trend] },\n        { func: drawPrefectureTrajectoryChart, param: [ddb.prefectures] },\n        { func: drawPrefectureTable, param: [ddb.prefectures, ddb.totals] },\n      ];\n      callingArray.forEach(i => {\n        setTimeout(function () {\n          var start = window.performance.now();\n          i.func(...i.param);\n          var end = window.performance.now();\n          console.log(`Execution time zuzu: ${end - start} ms`);\n        }, 300)\n      })\n    }\n\n\n\n    whenMapAndDataReady();\n  });\n}\n\nvar pageDraws = 0;\nvar styleLoaded = false;\nvar jsonData = undefined;\nfunction whenMapAndDataReady() {\n  // This runs drawMapPref only when\n  // both style and json data are ready\n\n  if (!styleLoaded || !jsonData) {\n    return;\n  }\n\n  drawMapPrefectures(pageDraws);\n}\n\nwindow.onload = function () {\n  initDataTranslate();\n  drawMap();\n\n  map.once(\"style.load\", function (e) {\n    styleLoaded = true;\n\n    map.getStyle().layers.forEach(function (thisLayer) {\n      if (thisLayer.type == \"symbol\") {\n        map.setLayoutProperty(thisLayer.id, \"text-field\", [\n          \"get\",\n          \"name_\" + LANG,\n        ]);\n      }\n    });\n\n    whenMapAndDataReady();\n  });\n\n  loadDataOnPage();\n\n  // Reload data every INTERVAL\n  const FIVE_MINUTES_IN_MS = 300000;\n  setInterval(function () {\n    pageDraws++;\n    loadDataOnPage();\n  }, FIVE_MINUTES_IN_MS);\n  //   }\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport \"./CovidApp\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}